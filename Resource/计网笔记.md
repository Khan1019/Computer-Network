# 题型总结

#### Q1 计算子网掩码通常涉及以下几个步骤：

1. **确定网络类别**：首先，根据IP地址的第一个字节确定其类别（A类、B类或C类），这决定了默认子网掩码是什么。例如，A类地址的默认子网掩码是255.0.0.0，B类是255.255.0.0，C类是255.255.255.0。
2. **确定所需子网数或主机数**：根据你的网络需求，确定你需要的子网数量或每个子网上的主机数量。
3. **计算子网掩码**：
   - 如果你知道需要的子网数量，可以通过将默认子网掩码的0位转换为1位来增加额外的子网。例如，如果你有一个C类地址，并且需要4个子网，你将需要两个额外的位来表示子网（因为2位可以表示4个不同的值），所以子网掩码将是255.255.255.192（最后一个字节是11000000）。
   - 如果你知道每个子网需要支持的主机数量，可以通过计算主机部分需要多少位来反向工作。例如，如果每个子网需要60台主机，你将需要6位来表示主机（因为2^6=64），剩余的位数（在这个例子中是26位）用于网络和子网地址，所以子网掩码将是255.255.255.192。

#### Q2  

一个B类网络 128.16.0.0/16 被网络管理员划分为16个大小相同的子网，则子网掩码为255.255.240.0。如果按照IP地址从小到大对子网进行编号，写出第2个子网的地址范围，用a.b.c.d/x的形式128.16.16.0/20。

a.b.c.d/x

子网掩码：B类从255.255.0.0开始算，分成16子网要加4个一在左边1111000 = 240

**x** 代表子网掩码的长度：这是一个斜杠后面跟着的数字，表示子网掩码中有多少个连续的1位。这个数字可以从0到32之间变化。例如，/24 表示子网掩码的前24位是1，后8位是0，相当于255.255.255.0。

原本就是/16了，现在又被划分了16个子网，还需要4位1，因此x=16+4=20。

第2个子网地址，从128.16.0.0/20（第一个）开始变化，到他拿的4位是从左边开始的，这时是00010000，所以是16，故128.16.16.0/20.

------

#### Q3 地址聚合

1.有如下的四个/24 地址块，试进行最大可能的聚合。

212.56.132.0/24

212.56.133.0/24

212.56.134.0/24

212.56.135.0/24

------

转化二进制

由题意可知，四个地址块只有第三字节不同所以，四个地址块第三字节为二进制结果为： 

212.56.10000100.0

212.56.10000101.0

212.56.10000110.0

212.56.10000111.0

共同前缀有22位，所以聚合的CIDR地址块是：212.56.132.0/22

#### Q4 CRC

1.已知 CRC 码的生成多项式$ G(X) =X^6+X^5+X+1$,若信息位是 1101110010001, 求冗余多项式R(x)

2.要发送的数据为 1101011011。采用 CRC 的生成多项式是 P(x)=x^4+x+1 。试求应添加在数据后面的余数。数据在传输过程中最后一个 1 变成了 0,问接收端能否发现？若数据在传输过程中最后两个 1 都变成了 0, 问接收端能否发现？

还是先算冗余码，

1.n=6,$G(X)=1X^6+1X^5+0X^4+0X^3+0X^2+1X+1$，除数为1100011，被除数就是这个信息位补6个0。余数10110前面补0补够n=6位010110就是冗余码

2.冗余码算出来是1110，最后一个1变0，也就是1101011010，也是除以除数10011，余数是11不是0代表出错

#### Q5 

数据报包括首部，数据部分长度不包括。

TCP首部 20字节；UDP首部8字节；DFdontfragment；MFmorefragment；片偏移字段,单位为8字节

1.已知一个分组的数据部分长度为 3800 字节，网络规定分组的分片长度不能超过 1420 字节假设 IP 分组的首部采用固定首部 20 个字节。请问原始分组需要分成几个分片？每个分片的总长度、标识字段(注：原始分组标识字段是 666)、DF 标志位(注：0 表示可分片，1 表示不可分片)、MF 标志位(注：0 表示是最后分片，1 表示后面还有分片)、分片偏移字段各是多少？

数据报总长度3800+20=3820 分3个分组

原始：3820+666+0+0 分的是数据部分

第一片：1420+标志字段666+0（可分片）+1（还有后续片）+0

第二片：1420+标志字段666+0+1+175（1400/8）

第三片：1020+标志字段666+0+0+350+350

2.一个 UDP 用户数据报的数据字段为 8192 字节。在链路层要使用以太网来传送。试问应当划分为几个.IP 数据报片？说明每一个数据报数据字段长度和片偏移字段的值。

默认1500字节数据报包括首部，（8192+8）/（1500-20）=4…800，但是分片只分数据部分

UDP数据报 = 首部8字节 + 数据部分组成

因为数据字段为8192字节，所以数据报总长度 = 8192 + 8 = 8200 字节

以太网的最大传输单元MTU = 1500

因为要划分为几个IP数据报，而每个IP数据报的首部占20字节，所以字段部分最大占1480字节

划分的时候，可以划分为 8200 / 1480 = 5，余 800 字节

所以应当划分为 6 个IP数据报片，前 5 个都是 1480 字节，第 6 个是 800 字节

第一个IP数据报字段长度：1480，第一片偏移字段：1480 * 0 / 8 = 0
第二个IP数据报字段长度：1480，第二片偏移字段：1480 * 1 / 8 = 185
第三个IP数据报字段长度：1480，第三片偏移字段：1480 * 2 / 8 = 370
第四个IP数据报字段长度：1480，第四片偏移字段：1480 * 3 / 8 = 555
第五个IP数据报字段长度：1480，第五片偏移字段：1480 * 4 / 8 = 740
第六个IP数据报字段长度：800，  第六片偏移字段：1480 * 5 / 8 = 925



#### Q6

一个 UDP 用户数据报的数据字段为 6192 字节。在链路层要使用以太网来传送。试问应当划分为几个 IP 数据报片？说明每一个数据报数据字段长度和片偏移字段的值。

1480+20

#### Q7码分多址通信

共有 4 个站进行码分多址 CDMA 通信。4 个站的码片序列为：

A. (-1 -1 -1 +1 +1 -1 +1 +1 )
B. (-1 -1 +1 -1 +1 +1 +1 -1 )
C. (-1 +1 -1 +1 +1 +1 -1 -1)

D. (-1 +1 -1 -1 -1 -1 +1 -1)
现收到这样的码片序列：(-1 +1 -3 +1 -1 - 3 +1 +1)。问哪个站发送数据了？发送数据的站发送的 1 还是 0?解：正交运算结果是1表示1，-1表示发送的是0，0表示没发送

A.-1\*(-1)+(-1)\*1+(-1)\*(-3)+(1*1)...

#### Q8路由表更新

对发来的路由表所有距离+1,下一跳统一成新发来的路由器

表中不存在的，直接添加

存在，下一跳不同，距离小时更新

存在，下一跳相同，距离无条件更新老表的距离



#### Q9路由表下一跳

设某路由器建立了如表 1 所示路由表。
表 1 某路由器的路由表

| 目的网络      | 子网掩码          | 下一跳         |
| :------------ | :---------------- | :------------- |
| 128.96.40.0   | 255.255 .255 .128 | 接口 Eth0      |
| 128.96.40.128 | 255.255 .255 .128 | 接口 Eth1      |
| 128.96.41.0   | 255.255 .255 .128 | $\mathrm{R} 2$ |
| 192.4.123.0   | 255.255 .255 .192 | $\mathrm{R} 3$ |
| $*($ 默认)    | -                 | $\mathrm{R} 4$ |

现共收到 5 个分组, 其目的地址分别为:
(1) 128.96.40.10(2) 128.96.41.12(3) 128.96.41.151(4) 192.4.123.17(5) 192.4.123.90

试分别计算下一跳。

128.96.40.10和255.255.255.128相与。

#### Q10网络地址、广播地址、主机/用户地址的求法

**网络地址**: 通过将IP地址与子网掩码进行逻辑AND操作计算得出。网络地址是子网上的第一个地址，用于标识子网本身。在这个地址中，所有不属于子网掩码的部分（即子网掩码中0的部分）在网络地址中都被置为0。

**广播地址**: 通过将网络地址的主机部分（子网掩码中0的部分）全部置为1计算得出。广播地址是子网上的最后一个地址，用于在子网中的所有主机之间进行广播。

**最小用户地址**: 通常是网络地址的下一个地址，即网络地址的最后一位加1。

**最大用户地址**: 通常是广播地址的前一个地址，即广播地址的最后一位减1。

例1.一个子网 IP 地址为 10.80.0.0，子网掩码为 255.224.0.0 的网络，它的网络地址、广播地址、最小用户地址、最大用户地址分别是？

例2.192.168.1.100/29=255.255.255.248求网络地址、主机地址和广播地址

解：

所以：网络地址：192.168.1.96/29

主机地址：192.168.1.97~192.168.1.102

广播地址：192.168.1.103

------------------------------------------------
#### Q11子网划分

IP地址分类
A类: (1.0.0.0-126.0.0.0)B类: (128.0.0.0-191.255.0.0)C类: (192.0.0.0-223.255.255.0)

最后8位，前面的表示子网，后面的表示主机

##### 例1.

现有一个 C 类网段 193.160.80.0, 要将其划分为 6 个子网，请问如何指定子网掩码？每个子网的网络地址、广播地址分别是多少？可分配的主机地址范围是多少？

**从主机号借位**

6 ≤ 2^3 - 2 要借3位

C类子网掩码 255.255.255.11100000 = 255.255.255.224

193.160.80.___00000中间借三位

不能全0，不能全1，因此是001、010、011、100、101、110六个

网络地址193.160.80.00100000……六个

广播地址

例2

某单位分配到一个起始地址为14.24.74.0/24的地址 4-54块。该单位需要用到三个子网，他们的三个子地址块的具体要求是：子网N$_{1}$需要120个地址，子网N2 需要60个地址，子网N$_{3}$ 需要10个地址。请给出地址块的分配方案。

例3

现有一个C类网络地址段192.168.1.0/24，请使用变长子网掩码给三个子网分别分配IP地址

需求：三个区域第一个部门需要30个主机，第二个部门需要20个主机，第三个部门需要10个主机



方法一（主机数有点浪费）：

3个部门，至少借2位有4个子网，每个部门主机数2^6=62，满足3个部门需求，这时掩码数为/26=255.255.255.192

块=2^6=64

所以：第一个部门网段为：192.168.1.0/26

第二个部门网段为：192.168.1.64/26

第3个部门网段为：192.168.1.128/26

方法二（更加精确划分节约IP地址）：

第一个部门30台主机至少保留5位主机位（2^x-2>=30），最多借3位，有8个子网，此时掩码为/27

块=2^5=32

所以：子网地址为：192.168.1.0/27

主机地址范围：192.168.1.1~192.168.1.30

广播地址为：192.168.1.31/27

第二个部门20台主机至少保留5位主机位（2^x-2>=20），最多借3位，有8个子网，此时掩码为/27

块=2^5=32

所以：子网地址为：192.168.1.32/27

主机地址范围：192.168.1.33~192.168.1.62

广播地址为：192.168.1.63/27

第三个部门10台主机至少保留4位主机位（2^x-2>=10），最多借4位，有16个子网，此时掩码为/28

块=2^4=16

所以：子网地址为：192.168.1.64/28

主机地址范围：192.168.1.65~192.168.1.78 广播地址为：192.168.1.79/28

综上：第一个部门网段为：192.168.1.0/27 第二个部门网段为：192.168.1.32/27 第一个部门网段为：192.168.1.64/28


#### Q12RSA

选择两个大素数ｐ和ｑ

计算 n＝p\*q 和 z＝(p-1)\*(q-1)

选择一个与 z 互质的数，令其为 d

找到一个 e 使满足 e\*d＝1 (mod z)

公开密钥为 (e, n)，私有密钥为 (d, n)

加密方法：将明文M看成是一个比特串，将其划分成一个个数据块M，且有0≤M＜n 对每个数据块M，计算C＝M^e (mod n)，C即为M的密文

解密方法：对每个密文块C，计算M＝C^d (mod n)，M即为要求的明文

$31^7\equiv(-2)^7\mod33。$

Q13

考虑使用 32 比特主机地址的某数据报网络。假定一台路由器具有 4 条链路, 编号为 $0 \sim 3$, 分组能被转发到如下的各链路接口:

|                         目的地址范围                         | 链路接口 |
| :----------------------------------------------------------: | :------: |
| 11100000000000000000000000000000<br/>到<br/>11100000001111111111111111111111 |    0     |
| 11100000010000000000000000000000<br/>到<br/>11100000010000001111111111111111 |    1     |
| 11100000010000010000000000000000<br/>到<br/>11100001011111111111111111111111 |    2     |
|                             其他                             |   其他   |

A) 提供一个具有5个表项的转发表，使用最长前缀匹配，转发分组到正确的链路接口 。

B) 描述你的转发表是如何为具有下列目的地址的数据报决定适当的链路接口的。

#### Q13

DJ算法、DV算法

#### Q14距离向量

考虑互联 3 个子网 (子网 1 、子网 2 和子网 3 ) 的一台路由器。假定这 3 个子网的所有接口要求具有前缀 223.1.17/24。还假定子网 1 要求支持多达 60 个接口，子网 2 要求支持多达 90 个接口，子网 3 要求支持多达 12 个接口。提供 3 个满足这些限制的网络地址（形式为 $a . b . c . d / x$ ）。

根据接口数量可以算出，子网 $1,2,3$ 分别应该满足 掩码最多为 $26,25,28$ 位。

需要注意的是, 不同于有最长匹配原则的转发表, 这里只要求提供网络地址,因此网络地址范围不应重叠。





(1)

A: $1024 \quad 194.24 .0 .0 / 22 \quad 0000000000000000-0000001111111111$
B: $512 \quad 194.24 .4 .0 / 23 \quad 0000010000000000-0000010111111111$
C: $2048 \quad 194.24 .8 .0 / 21 \quad 0000100000000000-0000111111111111$
D: 1024 194.24.16.0/22 $0001000000000000-0001001111111111$
(2) R1-1: 194.24.0.1; R1-2: 194.24.4.1; R1-3: 194.24.8.1; R1-4: 193.0.0.1

R2-1: 193.0.0.2; R2-2: 194.24 .16 .1

1.参考上题网络，AS1中路由选择顺序为：优先选择AS路径最短的路由，其次热土豆原则
a) 若路由器 4a和2c之间存在直连的物理链路，给出路由器 1d 转发表中关于x的表项, 为什么?
b) 若AS2连接AS5，AS5连接AS4，给出路由器 1d 转发表中关于 x 的表项解答:

子网 1 $223.1 .17 .0 / 26$ 
子网 2 & $223.1 .17 .128 / 25$ 
子网 3 & $223.1 .17 .64 / 28$ 

| Direction             | LAN                    | WAN   |
| :-------------------- | :--------------------- | :---- |
| LAN $\rightarrow$ WAN | src.: 10.0.0.4, 4433   | src.: |
|                       | dst.: 202.38.64.10, 80 | dst.: |
| WAN $\rightarrow$ LAN | src.:                  | src.: |
|                       | dst.:                  | dst.: |

| Direction             | LAN                    | WAN   |
| :-------------------- | :--------------------- | :---- |
| LAN $\rightarrow$ WAN | src.: 10.0.0.4, 4433   | src.: |
|                       | dst.: 202.38.64.10, 80 | dst.: |
| WAN $\rightarrow$ LAN | src.:                  | src.: |
|                       | dst.:                  | dst.: |
