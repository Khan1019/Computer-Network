# 计网Homework4

> 5.

a.

|  No  |     前缀匹配      | 链路接口 |
| :--: | :---------------: | :------: |
|  1   |    11100000 00    |    0     |
|  2   | 11100000 01000000 |    1     |
|  3   |      1110000      |    2     |
|  4   |    11100001 1     |    3     |
|  5   |      others       |    3     |

b.

对第一个地址 11001000 10010001 01010001 01010101匹配others项，故选择链路接口 3。

对第二个地址 11100001 01000000 11000011 00111100匹配第3项，故选择链路接口2。

对第三个地址 11100001 10000000 00010001 01110111匹配第4项，故选择链路接口3。

> 7.

| 前缀匹配 |     变化范围      | 接口 | 地址数量 |
| :------: | :---------------: | :--: | :------: |
|    1     | 11000000~11011111 |  0   |    32    |
|    1     | 10000000~10111111 |  1   |    64    |
|    10    | 11100000~11111111 |  2   |    32    |
|  others  | 00000000~01111111 |  3   |   128    |

> 8.

子网1需要 6 位主机号，子网2需要 7 位主机号，子网3需要 4 位主机号。

子网1需要60个接口，取64个，子网地址长度为32-6=26位。

子网2需要90个接口，取128个，子网地址长度为32-7=25位。

子网3需要12个接口，取16个，子网地址长度为32-4=28位。

故给子网 1 分配 223.1.17.128/26 (64 个地址), 给子网 2 分配 223.1.17.0/25 (128 个地址), 给子网 3 分配 223.1.17.192/28 (16 个地址)

> 10.

|           前缀匹配            | 链路接口 |
| :---------------------------: | :------: |
|    11100000 00 (224.0/10)     |    0     |
| 11100000 01000000 (224.64/16) |    1     |
|        1110000 (224/8)        |    2     |
|    11100001 1 (225.128/9)     |    3     |
|            others             |    3     |

> 12.

(a)子网A需250接口，预留256个，地址长度24位；子网B和C需120接口，预留128个，地址长度25位。子网D, E, F各需2接口，可从B预留的8个地址中分配。具体配置为：A: 214.97.255/24, B: 214.97.254.0/25, C: 214.97.254.128/25, D: 214.97.254.0/31, E: 214.97.254.2/31, F: 214.97.254.4/30。

(b)

R1

|              前缀匹配              | 链路接口 |
| :--------------------------------: | :------: |
|     11010110 01100001 11111111     |    A     |
| 11010110 01100001 11111110 0000000 |    D     |
| 11010110 01100001 11111110 000001  |    F     |

R2

|              前缀匹配              | 链路接口 |
| :--------------------------------: | :------: |
| 11010110 01100001 11111111 0000000 |    D     |
|    11010110 01100001 11111110 0    |    B     |
| 11010110 01100001 11111110 0000001 |    E     |

R3

|              前缀匹配              | 链路接口 |
| :--------------------------------: | :------: |
| 11010110 01100001 11111111 000001  |    F     |
| 11010110 01100001 11111110 0000001 |    E     |
|    11010110 01100001 11111110 1    |    C     |

> 14.

数据报总长度为2400字节，其中首部长度20字节，数据长度2380字节。若最大传输单元（MTU）为700字节，每个分片最多可包含680字节数据。因此，需要4个分片（$\lceil\frac{2380}{680}\rceil=4$）来传输整个数据报。所有分片的标识号都是422。各分片的长度依次为700、700、700和360字节，标志位依次为1、1、1和0，片偏移依次为0、85、170和255。

